---
import BaseLayout from "../../layouts/BaseLayout.astro";
import JsonLd from "../../components/JsonLd.astro";

/**
 * ãƒ€ãƒŸãƒ¼ã® Place ä¸€è¦§ï¼ˆå®Ÿé‹ç”¨ã§ã¯API/DBã«å·®ã—æ›¿ãˆï¼‰
 * - name / address / geo ã‚’æ¥µåŠ›åŸ‹ã‚ã‚‹ã¨è©•ä¾¡ãŒå®‰å®šã—ã¾ã™
 */
const places = [
  {
    id: "pl-001",
    name: "æœ¨å ´å…¬åœ’ ãƒã‚¹ã‚±ãƒƒãƒˆã‚³ãƒ¼ãƒˆ",
    streetAddress: "æœ¨å ´å…¬åœ’",
    addressLocality: "æ±Ÿæ±åŒº",
    addressRegion: "æ±äº¬éƒ½",
    postalCode: "135-0023",
    addressCountry: "JP",
    latitude: 35.669,
    longitude: 139.814,
    note: "æœæ´»ãƒ©ãƒ³ï¼†è»½é‹å‹•ã«æœ€é©ã€‚é›†åˆå ´æ‰€ã¨ã—ã¦åˆ©ç”¨ã€‚"
  },
  {
    id: "pl-002",
    name: "æ±Ÿæ±åŒºã‚¹ãƒãƒ¼ãƒ„ã‚»ãƒ³ã‚¿ãƒ¼",
    streetAddress: "æ±äº¬éƒ½æ±Ÿæ±åŒºåŒ—ç ‚1-2-9",
    addressLocality: "æ±Ÿæ±åŒº",
    addressRegion: "æ±äº¬éƒ½",
    postalCode: "136-0073",
    addressCountry: "JP",
    latitude: 35.680,
    longitude: 139.824,
    note: "å±‹å†…ãƒã‚¹ã‚±ãƒƒãƒˆã‚³ãƒ¼ãƒˆæœ‰ã€‚é€±æœ«ã®å€‹äººå‚åŠ ã«äººæ°—ã€‚"
  },
  {
    id: "pl-003",
    name: "æ¸…æ¾„ç™½æ²³ ã‚«ãƒ•ã‚§ãƒ©ã‚¦ãƒ³ã‚¸",
    streetAddress: "æ¸…æ¾„ç™½æ²³é§…å‘¨è¾º",
    addressLocality: "æ±Ÿæ±åŒº",
    addressRegion: "æ±äº¬éƒ½",
    postalCode: "135-0021",
    addressCountry: "JP",
    latitude: 35.680,
    longitude: 139.799,
    note: "è‹±ä¼šè©±ã‚†ã‚‹ã‚«ãƒ•ã‚§ä¼šã®å®šç•ªã‚¹ãƒãƒƒãƒˆã€‚"
  }
];

/** ãƒ¡ã‚¿ */
const pageTitle = "é–‹å‚¬å ´æ‰€ä¸€è¦§ | MinnaCircle";
const pageDesc  = "MinnaCircleã®ä¸»ãªé–‹å‚¬å ´æ‰€ä¸€è¦§ã€‚å…¬åœ’ãƒ»ä½“è‚²é¤¨ãƒ»ã‚«ãƒ•ã‚§ãªã©ã®é›†åˆå ´æ‰€æƒ…å ±ã€‚";

/** ã‚µã‚¤ãƒˆOriginï¼ˆastro.configã®siteãŒã‚ã‚Œã°ä½¿ç”¨ï¼‰ */
const siteOrigin = (Astro.site && Astro.site.href) ? Astro.site.href.replace(/\/$/, "") : "";

/** ItemList(JSON-LD) ã‚’ç”Ÿæˆï¼ˆå„ item ã¯ Place ã‚’æŒ‡ã™URLã‚’æŒã¤ï¼‰ */
const itemListLd = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "MinnaCircle Places",
  "itemListElement": places.map((p, i) => ({
    "@type": "ListItem",
    "position": i + 1,
    "name": p.name,
    ...(siteOrigin ? { "url": `${siteOrigin}/places/${p.id}` } : {}),
    "item": {
      "@type": "Place",
      "name": p.name,
      "address": {
        "@type": "PostalAddress",
        "streetAddress": p.streetAddress,
        "addressLocality": p.addressLocality,
        "addressRegion": p.addressRegion,
        "postalCode": p.postalCode,
        "addressCountry": p.addressCountry
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": p.latitude,
        "longitude": p.longitude
      }
    }
  }))
};
---

<BaseLayout title={pageTitle} lang="ja" description={pageDesc}>
  <!-- JSON-LD: ItemList(Place) -->
  <JsonLd data={itemListLd} />

  <section class="max-w-6xl mx-auto px-4 py-8 md:py-12">
    <h1 class="text-2xl md:text-3xl font-extrabold mb-6">é–‹å‚¬å ´æ‰€ä¸€è¦§</h1>

    <!-- ãƒŠãƒ“ -->
    <div class="mb-6 flex flex-wrap gap-3 text-sm">
      <a href="/search?type=place" class="px-4 py-2 rounded-xl border hover:bg-gray-50">å ´æ‰€ã§æ¤œç´¢ã™ã‚‹</a>
      <a href="/events" class="px-4 py-2 rounded-xl border hover:bg-gray-50">ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã¸</a>
    </div>

    <!-- ã‚°ãƒªãƒƒãƒ‰ -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {places.map((p) => (
        <a href={`/places/${p.id}`} class="block bg-white rounded-2xl shadow hover:shadow-md transition">
          <div class="rounded-t-2xl w-full h-40 bg-gray-100 flex items-center justify-center text-gray-400 text-sm">
            Place
          </div>
          <div class="p-4">
            <h2 class="font-bold line-clamp-2">{p.name}</h2>
            <p class="text-sm text-gray-600 mt-1 line-clamp-2">{p.note}</p>
            <div class="mt-2 text-xs text-gray-500 space-y-1">
              <div>ğŸ“ {p.addressRegion}{p.addressLocality} / {p.streetAddress}</div>
              <div>ğŸ§­ {p.latitude}, {p.longitude}</div>
            </div>
          </div>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
