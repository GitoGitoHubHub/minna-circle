---
const { circle } = Astro.props as {
  circle: {
    id: string;
    name: string;
    intro?: string;
    image?: string;
    memberCount?: number;
    areaText?: string;
    popularity?: number;
  };
};
const cover = circle.image || "/og.png";
---

<a href={`/circles/${circle.id}`} class="block rounded-2xl border shadow hover:shadow-lg transition bg-white overflow-hidden">
  <!-- 画像を小型サムネに固定（インラインstyle + !important で確実に適用） -->
  <img
    src={cover}
    alt={circle.name}
    loading="lazy"
    decoding="async"
    style="display:block;width:100% !important;height:96px !important;object-fit:cover !important;object-position:center;"
  />

  <div class="p-4 space-y-2">
    <h3 class="text-lg font-bold line-clamp-2">{circle.name}</h3>
    {circle.intro && <p class="text-sm text-gray-600 line-clamp-2">{circle.intro}</p>}
    {typeof circle.memberCount === "number" && (
      <p class="text-xs text-gray-500">メンバー数: {circle.memberCount}</p>
    )}
    {circle.areaText && <p class="text-xs text-gray-500">エリア: {circle.areaText}</p>}
    {typeof circle.popularity === "number" && <p class="text-xs text-gray-500">人気度: {circle.popularity}</p>}
  </div>
</a>
