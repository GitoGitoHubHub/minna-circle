---
/**
 * <JsonLd data={object | object[]}>
 * - data が配列なら複数の <script> を出力
 * - set:html で JSON をそのまま埋め込む（エスケープ禁止）
 */
const { data } = Astro.props;
const items = Array.isArray(data) ? data : [data];

// JSON を最小化して埋め込む（改行やスペースは不要）
const toJson = (obj: any) => JSON.stringify(obj);
---

{items.filter(Boolean).map((item) => (
  <script type="application/ld+json" set:html={toJson(item)}></script>
))}
